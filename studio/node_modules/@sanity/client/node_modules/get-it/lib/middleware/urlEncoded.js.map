{"version":3,"file":"urlEncoded.js","names":["encode","urlEncode","default","isBuffer","obj","constructor","processOptions","options","body","isStream","pipe","shouldSerialize","isPlainObject","headers"],"sources":["../../src/middleware/urlEncoded.js"],"sourcesContent":["import {isPlainObject} from 'is-plain-object'\nimport urlEncode from 'form-urlencoded'\n\nconst encode = urlEncode.default || urlEncode\n\nconst isBuffer = obj =>\n  !!obj.constructor &&\n  typeof obj.constructor.isBuffer === 'function' &&\n  obj.constructor.isBuffer(obj)\n\nexport default () => ({\n  processOptions: options => {\n    const body = options.body\n    if (!body) {\n      return options\n    }\n\n    const isStream = typeof body.pipe === 'function'\n    const shouldSerialize = !isStream && !isBuffer(body) && isPlainObject(body)\n\n    if (!shouldSerialize) {\n      return options\n    }\n\n    return Object.assign({}, options, {\n      body: encode(options.body),\n      headers: Object.assign({}, options.headers, {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      })\n    })\n  }\n})\n"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AAEA,IAAMA,MAAM,GAAGC,uBAAA,CAAUC,OAAV,IAAqBD,uBAApC;;AAEA,IAAME,QAAQ,GAAG,SAAXA,QAAW,CAAAC,GAAG;EAAA,OAClB,CAAC,CAACA,GAAG,CAACC,WAAN,IACA,OAAOD,GAAG,CAACC,WAAJ,CAAgBF,QAAvB,KAAoC,UADpC,IAEAC,GAAG,CAACC,WAAJ,CAAgBF,QAAhB,CAAyBC,GAAzB,CAHkB;AAAA,CAApB;;eAKe;EAAA,OAAO;IACpBE,cAAc,EAAE,wBAAAC,OAAO,EAAI;MACzB,IAAMC,IAAI,GAAGD,OAAO,CAACC,IAArB;;MACA,IAAI,CAACA,IAAL,EAAW;QACT,OAAOD,OAAP;MACD;;MAED,IAAME,QAAQ,GAAG,OAAOD,IAAI,CAACE,IAAZ,KAAqB,UAAtC;MACA,IAAMC,eAAe,GAAG,CAACF,QAAD,IAAa,CAACN,QAAQ,CAACK,IAAD,CAAtB,IAAgC,IAAAI,4BAAA,EAAcJ,IAAd,CAAxD;;MAEA,IAAI,CAACG,eAAL,EAAsB;QACpB,OAAOJ,OAAP;MACD;;MAED,OAAO,SAAc,EAAd,EAAkBA,OAAlB,EAA2B;QAChCC,IAAI,EAAER,MAAM,CAACO,OAAO,CAACC,IAAT,CADoB;QAEhCK,OAAO,EAAE,SAAc,EAAd,EAAkBN,OAAO,CAACM,OAA1B,EAAmC;UAC1C,gBAAgB;QAD0B,CAAnC;MAFuB,CAA3B,CAAP;IAMD;EApBmB,CAAP;AAAA,C"}