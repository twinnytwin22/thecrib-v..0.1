"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _createErrorClass = _interopRequireDefault(require("create-error-class"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var HttpError = (0, _createErrorClass.default)('HttpError', function (res, ctx) {
  var truncatedUrl = res.url.length > 400 ? "".concat(res.url.slice(0, 399), "\u2026") : res.url;
  var msg = "".concat(res.method, "-request to ").concat(truncatedUrl, " resulted in ");
  msg += "HTTP ".concat(res.statusCode, " ").concat(res.statusMessage);
  this.message = msg.trim();
  this.response = res;
  this.request = ctx.options;
});

var _default = function _default() {
  return {
    onResponse: function onResponse(res, ctx) {
      var isHttpError = res.statusCode >= 400;

      if (!isHttpError) {
        return res;
      }

      throw new HttpError(res, ctx);
    }
  };
};

exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=httpErrors.js.map