{
  "version": 3,
  "sources": ["../../src/middleware/progress/browser-progress.js"],
  "sourcesContent": ["export default () => ({\n  onRequest: evt => {\n    if (evt.adapter !== 'xhr') {\n      return\n    }\n\n    const xhr = evt.request\n    const context = evt.context\n\n    if ('upload' in xhr && 'onprogress' in xhr.upload) {\n      xhr.upload.onprogress = handleProgress('upload')\n    }\n\n    if ('onprogress' in xhr) {\n      xhr.onprogress = handleProgress('download')\n    }\n\n    function handleProgress(stage) {\n      return event => {\n        const percent = event.lengthComputable ? (event.loaded / event.total) * 100 : -1\n        context.channels.progress.publish({\n          stage,\n          percent,\n          total: event.total,\n          loaded: event.loaded,\n          lengthComputable: event.lengthComputable\n        })\n      }\n    }\n  }\n})\n"],
  "mappings": ";AAAA,IAAO,2BAAQ,OAAO;AAAA,EACpB,WAAW,SAAO;AAChB,QAAI,IAAI,YAAY,OAAO;AACzB;AAAA,IACF;AAEA,UAAM,MAAM,IAAI;AAChB,UAAM,UAAU,IAAI;AAEpB,QAAI,YAAY,OAAO,gBAAgB,IAAI,QAAQ;AACjD,UAAI,OAAO,aAAa,eAAe,QAAQ;AAAA,IACjD;AAEA,QAAI,gBAAgB,KAAK;AACvB,UAAI,aAAa,eAAe,UAAU;AAAA,IAC5C;AAEA,aAAS,eAAe,OAAO;AAC7B,aAAO,WAAS;AACd,cAAM,UAAU,MAAM,mBAAoB,MAAM,SAAS,MAAM,QAAS,MAAM;AAC9E,gBAAQ,SAAS,SAAS,QAAQ;AAAA,UAChC;AAAA,UACA;AAAA,UACA,OAAO,MAAM;AAAA,UACb,QAAQ,MAAM;AAAA,UACd,kBAAkB,MAAM;AAAA,QAC1B,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACF;",
  "names": []
}
