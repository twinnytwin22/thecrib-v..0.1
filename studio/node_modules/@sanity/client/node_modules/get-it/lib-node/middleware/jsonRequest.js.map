{"version":3,"file":"jsonRequest.js","names":["serializeTypes","isBuffer","obj","constructor","processOptions","options","body","isStream","pipe","shouldSerialize","indexOf","Array","isArray","isPlainObject","Object","assign","JSON","stringify","headers"],"sources":["../../src/middleware/jsonRequest.js"],"sourcesContent":["import {isPlainObject} from 'is-plain-object'\n\nconst serializeTypes = ['boolean', 'string', 'number']\nconst isBuffer = obj =>\n  !!obj.constructor &&\n  typeof obj.constructor.isBuffer === 'function' &&\n  obj.constructor.isBuffer(obj)\n\nexport default () => ({\n  processOptions: options => {\n    const body = options.body\n    if (!body) {\n      return options\n    }\n\n    const isStream = typeof body.pipe === 'function'\n    const shouldSerialize =\n      !isStream &&\n      !isBuffer(body) &&\n      (serializeTypes.indexOf(typeof body) !== -1 || Array.isArray(body) || isPlainObject(body))\n\n    if (!shouldSerialize) {\n      return options\n    }\n\n    return Object.assign({}, options, {\n      body: JSON.stringify(options.body),\n      headers: Object.assign({}, options.headers, {\n        'Content-Type': 'application/json'\n      })\n    })\n  }\n})\n"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,cAAc,GAAG,CAAC,SAAD,EAAY,QAAZ,EAAsB,QAAtB,CAAvB;;AACA,MAAMC,QAAQ,GAAGC,GAAG,IAClB,CAAC,CAACA,GAAG,CAACC,WAAN,IACA,OAAOD,GAAG,CAACC,WAAJ,CAAgBF,QAAvB,KAAoC,UADpC,IAEAC,GAAG,CAACC,WAAJ,CAAgBF,QAAhB,CAAyBC,GAAzB,CAHF;;eAKe,OAAO;EACpBE,cAAc,EAAEC,OAAO,IAAI;IACzB,MAAMC,IAAI,GAAGD,OAAO,CAACC,IAArB;;IACA,IAAI,CAACA,IAAL,EAAW;MACT,OAAOD,OAAP;IACD;;IAED,MAAME,QAAQ,GAAG,OAAOD,IAAI,CAACE,IAAZ,KAAqB,UAAtC;IACA,MAAMC,eAAe,GACnB,CAACF,QAAD,IACA,CAACN,QAAQ,CAACK,IAAD,CADT,KAECN,cAAc,CAACU,OAAf,CAAuB,OAAOJ,IAA9B,MAAwC,CAAC,CAAzC,IAA8CK,KAAK,CAACC,OAAN,CAAcN,IAAd,CAA9C,IAAqE,IAAAO,4BAAA,EAAcP,IAAd,CAFtE,CADF;;IAKA,IAAI,CAACG,eAAL,EAAsB;MACpB,OAAOJ,OAAP;IACD;;IAED,OAAOS,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBV,OAAlB,EAA2B;MAChCC,IAAI,EAAEU,IAAI,CAACC,SAAL,CAAeZ,OAAO,CAACC,IAAvB,CAD0B;MAEhCY,OAAO,EAAEJ,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBV,OAAO,CAACa,OAA1B,EAAmC;QAC1C,gBAAgB;MAD0B,CAAnC;IAFuB,CAA3B,CAAP;EAMD;AAvBmB,CAAP,C"}