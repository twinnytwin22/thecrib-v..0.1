"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _createErrorClass = _interopRequireDefault(require("create-error-class"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const HttpError = (0, _createErrorClass.default)('HttpError', function (res, ctx) {
  const truncatedUrl = res.url.length > 400 ? `${res.url.slice(0, 399)}â€¦` : res.url;
  let msg = `${res.method}-request to ${truncatedUrl} resulted in `;
  msg += `HTTP ${res.statusCode} ${res.statusMessage}`;
  this.message = msg.trim();
  this.response = res;
  this.request = ctx.options;
});

var _default = () => ({
  onResponse: (res, ctx) => {
    const isHttpError = res.statusCode >= 400;

    if (!isHttpError) {
      return res;
    }

    throw new HttpError(res, ctx);
  }
});

exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=httpErrors.js.map