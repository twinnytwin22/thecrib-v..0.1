"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _isPlainObject = require("is-plain-object");

var _formUrlencoded = _interopRequireDefault(require("form-urlencoded"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const encode = _formUrlencoded.default.default || _formUrlencoded.default;

const isBuffer = obj => !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj);

var _default = () => ({
  processOptions: options => {
    const body = options.body;

    if (!body) {
      return options;
    }

    const isStream = typeof body.pipe === 'function';
    const shouldSerialize = !isStream && !isBuffer(body) && (0, _isPlainObject.isPlainObject)(body);

    if (!shouldSerialize) {
      return options;
    }

    return Object.assign({}, options, {
      body: encode(options.body),
      headers: Object.assign({}, options.headers, {
        'Content-Type': 'application/x-www-form-urlencoded'
      })
    });
  }
});

exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=urlEncoded.js.map